<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wine Project</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!--Animate.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css"/>
    <!--google fonts-->
    <link href="https://fonts.googleapis.com/css2?family=Halant:wght@400;500;600;700&family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!--main style file-->
    <link rel="stylesheet" href="wineStyle.css">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>
<body>
<!--header-->
<nav id="header" class="navbar fixed-top navbar-light">
    <div class="container">
        <a class="navbar-brand" href="#"><img src="img/logo.png" width="80%"></a>
        <ul class="nav">
            <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="#research">Our Research</a>
            </li>
            <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="#taste">Taste Profile</a>
            </li>
            <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="#recommendation">Details</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#tips">Tips</a>
            </li>
        </ul>
    </div>
</nav>

<!--Intro Page-->
<section id="intro">
    <div class="container">
        <h1 class="primary-title">A Guide to Wine Purchase</h1>
        <br>
        <div class="row">
            <div class="col-8">
                <p>
                    We all have this moment...<br><br>

                    Imagine yourself standing in front of the wine aisle of a store, wondering where to start.
                    The labels on the wine bottles are very informative, but often too informative to wine novice - cuz nothing really makes sense!<br><br>

                    <b>
                        Should I pick a wine based on its price, brand, variety, rating, region, year, or even more confusingly complex attributes,
                        like acidity, sweetness, body, aromas and colors?<br><br>
                    </b>

                    Conventional apps often start from recommending a list of wines from an expert perspective. We believe wine preference is subjective.
                    The best way to know whether you like the wine or not is to taste it yourself.
                    Yet what if you can‚Äôt taste wines when you have to purchase one at a grocery store?
                    Our project is uniquely positioned to recommend young people in their 20s affordable wines based on flavors.
                    Hope you can become a more confident wine buyer with the help of our project!
                </p>
            </div>
            <div class="col-4">
                <img src="img/intro.png" width="110%">
            </div>
        </div>
        <a href="#research"><img class="content-margin" id="btnToIntro" src="img/down.png" onclick="showIntro()"></a>
    </div>
</section>

<!--Research-->
<section id="research">
    <div class="container">
        <h1 class="primary-title-colored">Our Research</h1>
        <br>
        <h4 class="secondary-title-colored">Drinking frequency among different age groups</h4>
        <br>
        <div class="row">
            <div class="col-6">
                <img src="img/research_viz1.png" width="90%">
            </div>
            <div class="col-6">
                <p style="padding-top: 2rem;">
                    The change in wine drinking frequency showed that <b>the 21-29 group is the only significantly growing market segment</b>.
                    47% of the 20s expressed ‚Äúdrinking more wine‚Äù than a couple years ago. As age grows, people tend to maintain the same frequencies and rather than drink more.
                    <br><br>

                    Since 21 is the legal drinking age in the US, it makes sense that 21-29 years old are new to the wine world to learn and explore.
                    We decided to target the 21-29 years old, who <b>have the strongest demand to explore wines but limited wine knowledge</b>.
                </p>
            </div>
        </div>
        <h4 class="secondary-title-colored" style="margin-top: 56px;">Understand affordable price & wine rating</h4>
        <br>
        <div class="row">
            <div class="col-6">
                <p>
                    Q: What does affordability mean for wine purchasers ? <br><br>

                    <b>The majority of wine drinkers never bought wines priced over $30</b>, while wines under $30 are popular among drinkers.
                    For the sake of affordability for people in their 20s who are presumably price sensitive, we decided to recommend wines under $30 from our dataset.
                </p>
            </div>
            <div class="col-6">
                <p>
                    Q: Are expensive wines better than cheaper (affordable) wines ?<br><br>

                    Not necessarily. There is some positive correlation between wine prices and ratings, but higher price does not guarantee better wines.
                    The most expensive wine ($3300) in the dataset is not rated high by wine connoisseurs. Given the huge variations at each price level,
                    <b>affordable wines can also be good and sometimes better than expensive ones</b>.
                </p>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-6">
                <img src="img/research_viz2.png" width="90%">
            </div>
            <div class="col-6">
                <img src="img/research_viz3.png" width="90%">
            </div>
        </div>
        <div align="center">
            <p class="content-margin"><b>üëá Ready to explore wines based on your flavor ? üëá</b></p>
            <a href="#taste"><button id="toTasteBtn" onclick="showTasteProfile()"><b>START</b></button></a>
        </div>
    </div>
</section>

<!--Taste Profile-->
<section class="section" id="flavor">
   <div class="container">
       <h1 class="primary-title">Taste Profile</h1>
   </div>
</section>

<section id="taste">
    <div class="container-fluid">
        <h3>Flavor Exploration</h3><br>
        <br>
        <div class="row">
            <div class="col-3 offset-1">
                <h5>Choose the preferred wine type: </h5>
            </div>
            <div class="col-2" align="center">
                <img class="wine" id="White" src="img/wine/White.png">
                <br>
                <p>White Wine</p>
            </div>
            <div class="col-2" align="center">
                <img class="wine" id="Red" src="img/wine/Red.png">
                <br>
                <p>Red Wine</p>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-3 offset-1" id="flavor_title"></div>
        </div>
        <br>
        <div class="row" id="flavor_row1"></div>
        <br>
        <div class="row" align="center">
            <div class="col-5 offset-1" id="definition"></div>
            <div class="col-5">
                <div id="flavor_viz"></div>
            </div>
        </div>
    </div>
</section>

<!--Recommendation-->
<section id="recommendation">
    <div class="container-fluid">
        <div id="recommend_title"></div>
        <div class="row">
            <div class="col-8 offset-2" id="details" align="center"></div>
        </div>
    </div>
</section>

<!--Tips-->
<section id="tips">

</section>

<footer class="footer">
    <div class="container">
        <h6 style="padding-top:15px;">UC Berkeley INFO247 Information Visualization and Presentation - Final Project</h6>
        <h6>Present to you by Yinan Chen, Yin Qiu, Xinran (Tracy) Wei</h6>
        <h6 id="end"><a href="#"><u>References</u></a><span style="right:10%;position: absolute;">All Rights Reserved ¬© 2020 </span></h6>
    </div>
</footer>

<script>

    function showIntro(){
        $("#research").show();
    }

    function showTasteProfile(){
        $("#taste").show();
        // $(".footer").show();
    }

    //const img_path = "http://localhost/wineproject/img/";
    const img_path = "https://yinan-chen.github.io/wineproject/img/";
    const flavors = {
      "White": ["Citrus Fruit","Stone Fruit","Tropical Fruit","Floral","Herbal"],
      "Red":["Red Fruit","Black Fruit","Floral","Cooking Spice","Leather"]
    };
    var wine = "";
    var flavors_select = {first:"",second:""};
    var flavor_count = 0;

    $(".wine").click(function(e){
        //clean
        $("#definition").html("");
        $("#flavor_viz").html("");

        let curr = e.target;
        if(wine !== "")
            $("#"+wine).attr("src",img_path+"wine/"+wine+".png");
        curr.src = img_path+"wine/"+curr.id+"_select.png";
        wine = curr.id;
        console.log(wine);

        $("#flavor_title").html("<h5>Choose two favorite flavors: </h5>");
        set_flavor_options(curr.id);
    });

    function set_flavor_options(type){
        let options = flavors[type];
        let htmlStr = "<div class='offset-1'></div>";

        options.forEach(function(flavor){
            let id = flavor;
            let name = flavor;
            if(flavor === "Floral"){
                id += type;
            }else if(flavor.includes("Fruit") || flavor.includes("Spice")){
                let subs = flavor.split(" ");
                id = subs[0]+subs[1];
            }
            htmlStr += "<div class='col-2' align='center'>" +
                            "<img class='flavor' id='"+id +"' alt='"+name +"' src='"+img_path+"icon/"+id+".png"+"'>" +
                            "<br>" +
                            "<p>"+name+"</p>" +
                            "</div>";
        });
        $("#flavor_row1").html(htmlStr);
        bindFlavorClickEvent();
    }

    function bindFlavorClickEvent(){
        let definition = $("#definition");
        let viz = $("#flavor_viz");
        $(".flavor").click(function(e){
            let curr = e.target;
            if(curr.src === img_path+"icon/"+curr.id+".png"){
                if(flavor_count < 2){
                    flavor_count === 0? flavors_select.first = curr.id:flavors_select.second = curr.id;
                }else{
                    //clean before
                    definition.html("");
                    viz.html("");
                    flavor_count = 0;
                    let first = $("#"+flavors_select.first);
                    let second = $("#"+flavors_select.second);
                    first.attr('src',img_path+"icon/"+flavors_select.first+".png");
                    second.attr('src',img_path+"icon/"+flavors_select.second+".png");
                    flavors_select.first = curr.id;
                }
                curr.src = img_path+"icon/"+curr.id+"_select.png";
                flavor_count++;
                let strHtml = definition.html();
                strHtml += "<img src='img/scale/explain"+flavor_count+".png' width='75%' style='padding-top: 5em;'>";
                definition.html(strHtml);
            }else {
                curr.src = img_path+"icon/"+curr.id+".png";
                flavor_count--;
                viz.html("");
                if(flavor_count === 0){
                    definition.html("");
                }else {
                    definition.html("<img src='img/scale/explain1.png' width='75%' style='padding-top: 5em;'>");
                }
            }
            console.log(flavors_select);
            console.log(flavor_count);

            //call to generate flavor viz
            if(flavor_count === 2){
                viz.html("");
                getFlavorViz(wine,$("#"+flavors_select.first).attr("alt"),$("#"+flavors_select.second).attr("alt"));
            }

        });
    }
</script>
<script src="wineViz.js"></script>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>